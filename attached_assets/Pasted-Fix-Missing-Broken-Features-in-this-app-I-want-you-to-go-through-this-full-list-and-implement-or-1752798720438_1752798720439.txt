Fix Missing & Broken Features in this app

 I want you to go through this full list and implement or repair everything mentioned below, fixing all bugs, adding all missing features, and following the detailed blueprint accurately. Below is the list of missing, broken, or incomplete elements that must be corrected immediately:


---

1. ‚öôÔ∏è SETTINGS SECTION ‚Äì COMPLETELY MISSING

You have not created the Settings section. Please implement the full page with the following capabilities:

‚û§ Color Theme Configuration

Add inputs to allow the admin to customize:

Primary Color (#344e80)

Secondary Color (#43a24c)

Background Color (#cedce7)

Text Color (#293958)


Font selectors:

Title Font: Cormorant Garamond

Body Font: Figtree


Show live preview on the page

Include a ‚ÄúReset to Default‚Äù button

‚úÖ All theme settings should be stored in a lightweight config file (not the database)


‚û§ Due Color Customization

Allow editing of 7 due status colors

Color pickers for background and border colors

Show preview of how each status will look

Reset to default option

Changes must apply live across the app with no reload


‚û§ Invoice Prefix Setting

Add a field to customize the invoice prefix (e.g., MC-INV-)

This should reflect in both student and tutor invoices




---

2. üßπ DATA FLUSH FEATURE ‚Äì INCOMPLETE

Only the button exists, but none of the logic or filters were built. Implement the full Data Flush system as follows:

Add options to delete only:

Records older than 3 months

Records older than 6 months

Custom date selector


Records to delete:

Attendance logs

Timestamps

Old invoice records

Other non-core logs


DO NOT delete:

Student profiles

Tutor profiles

Core configuration or roles


Add a confirmation modal

‚úÖ Include a download button to export a ZIP backup before deletion

Ensure backup only contains necessary data, excluding cache or orphaned metadata



---

3. üìä DUES SECTION ‚Äì COMPLETELY MISSING

You must add the global Dues section, split into two tabs: Students and Tutors

Each tab must:

List all students/tutors with color-coded payment status (7 levels)

Color must reflect a mix of:

Time since invoice was due

Attendance after invoice

Partial payment conditions



Color Legend:

1. White ‚Äì Just joined (before first invoice)


2. Light Yellow ‚Äì First 5 days after invoice


3. Dark Yellow ‚Äì Next 5 days overdue

Turns orange border if class attended without payment



4. Red ‚Äì After 10+ days, with red border if still attending


5. Light Purple ‚Äì Partial payment made (expires in 5 days)


6. Light Green ‚Äì Paid and attended class


7. Dark Green ‚Äì Paid but no class taken



Dues UI Features:

Search bar by name

Filter by color status

Sort by overdue duration

Manual override of status (admin can manually set any status)

Button to ‚ÄúMark as Paid‚Äù or ‚ÄúPartial‚Äù

This does not affect the current model of billing cycle end date or start date, but only for visualization..



---

4. üé® UI + STYLE ISSUES

The current UI has broken colors and unreadable text.

Fix the following:

Some sections have black text on dark backgrounds

Fonts are not applied correctly

Use:

Title font: Cormorant Garamond

Body font: Figtree


Apply proper spacing, padding, margin

All sections must follow consistent theming:

Background: #cedce7

Primary: #344e80

Secondary: #43a24c

Text: #293958



Make the UI clean, responsive, and readable across all pages.


---

7. üìÑ TEMPLATE FILES MISSING

Please ensure you create these missing templates if not already present:

add_edit_student.html

add_edit_tutor.html

student_detail.html, tutor_detail.html

dues.html, student_due_profile.html, tutor_due_profile.html

invoices.html (global list)

settings.html, add_role.html, add_user.html

data_flush.html

announcements.html


If you forgot or missed any, please create them now.


---

8. üì£ ANNOUNCEMENTS

This feature is missing or underbuilt. Please add:

Admin can add, edit, delete announcements

Each announcement can:

Expire after a certain date

Be deactivated manually


Announcements are shown on top of tutor dashboards

Automatically hides after expiry

Lightweight implementation

Confirmation before delete



---

9. üß† FINAL INSTRUCTION

Please generate all required:

Flask backend routes

Models

Templates (HTML/Jinja2)

Config files

AJAX scripts where required (e.g., tutor search dropdown) (ensure search function work correctly)


and I dont want tutors in user management sections.. i see tutor names in user management.. remove tutors from users list as they are turors and they did have a seperate page..



‚úÖ Ensure:

No 404 or 500 errors remain

App is deployable on Render or Railway

Fully working features as per specs above

UI is clean and readable

No core features from blueprint are omitted


Database Fixes

Regenerate schema to match models

Avoid circular imports

Ensure missing models like Invoice and Announcement exist

Fix broken routes (e.g., student add)

Ensure no usage of non-existent columns like tutor.user_id


---

‚úÖ Final Instruction:

Please regenerate all required code files, HTML templates, models, migrations, routing, and UI for these features. 

üí° Only generate invoices, status updates, when any authenticated user logs in (except tutors).

üîÅ If any of these features or templates were skipped earlier, make sure they‚Äôre now implemented fully.

‚úÖ App should be ready to deploy on Render or Railway, fully working with no crashes.
---